document.addEventListener("DOMContentLoaded", function () {
  const params = new URLSearchParams(window.location.search);

  const price = params.get("p");
  const service = params.get("s");
  const fb = params.get("fb");
  const image = params.get("i");
  const bid = params.get("bid");

  const previewImage = document.getElementById("product-image");
  if (previewImage && image) {
    previewImage.src = decodeURIComponent(image);
  }

  const form = document.getElementById("payment-form");
  if (form) {
    if (price) {
      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "price";
      input.value = price;
      form.appendChild(input);

      const priceEl = document.getElementById("product-price");
      if (priceEl) {
        priceEl.textContent = `${price}€`;
      }

      const totalPriceEl = document.getElementById("total-price");
      if (totalPriceEl) {
        totalPriceEl.innerHTML = `<span>${price}€</span>`;
      }
    }

    if (service) {
      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "service";
      input.value = service;
      form.appendChild(input);
    }

    if (fb) {
      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "fb";
      input.value = fb;
      form.appendChild(input);
    }

    if (bid) {
      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "bid";
      input.value = bid;
      form.appendChild(input);
    }
  }

    const priceElement = document.getElementById("price-text");
    if (priceElement && price) {
        priceElement.textContent = `${price} €`;
    }

    const serviceNameEl = document.getElementById("service-name");
    if (serviceNameEl && service) {
        serviceNameEl.textContent = service;
    }

    const plan = params.get("plan");
    const detailsContainer = document.getElementById("subscription-details");
    const planDetailsSource = document.getElementById(plan);

    if (detailsContainer && planDetailsSource) {
        detailsContainer.innerHTML = planDetailsSource.innerHTML;
    }
});
