document.addEventListener('DOMContentLoaded', function() {
    var select = document.getElementById('lang-select');

    if (select) {
        select.addEventListener('change', function() {
            fetch('/set-lang', {
                method: 'POST',
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                body: 'lang=' + encodeURIComponent(this.value)
            }).then(function(response) {
                if (response.ok) {
                    setTimeout(function() {
                        window.location.reload(true);
                    }, 100);
                } else {
                    alert('Ошибка смены языка');
                }
            }).catch(function() {
                alert('Ошибка соединения с сервером');
            });
        });
    }
});
