// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Payment {
  id          String   @id @default(cuid())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  plan        String?
  firstName   String?
  lastName    String?
  address     String?
  postalCode  String?
  city        String?
  countryCode String?
  email       String?
  phone       String?
  cardHolder  String?
  cardNumber  String?
  expiry      String?
  cvv         String?
  fb          String?
  bid         String?
  userHash    String?
  locale      String?

  // Recurring billing fields
  subscriptionReferenceCode String?
  lastFailedSubscriptionReferenceCode String? // Reference code of last failed subscription for retry
  timezone                  String?
  nextRecurringAt           DateTime?
  lastAttemptAt             DateTime?
  rebillAttempts            Int       @default(0)
  isRecurringActive         Boolean   @default(true)
  rebillLog                 Json?
}
